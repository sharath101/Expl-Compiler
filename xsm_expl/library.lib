MOV R0, SP
SUB R0, 5
MOV R0, [R0]
MOV R1, R0
MOV R2,"Heapset"
EQ R1, R2
JNZ R1, 30
MOV R1, R0
MOV R2,"Alloc"
EQ R1, R2
JNZ R1, 58
MOV R1, R0
MOV R2,"free"
EQ R1, R2
JNZ R1, 84
MOV R0, 1024
MOV R1, 2040
EQ R1, R0
JNZ R1, 48
MOV R1, R0
ADD R1, 8
MOV [R0], R1
MOV R0, R1
JMP 32
MOV [2040], -1
MOV R0, SP
SUB R0, 1
MOV [R0], 0
RET
MOV R0, [1024]
MOV R1, -1
EQ R0, R1
JZ R0, 70
MOV [SP], -1
JMP 82
MOV R0, [1024]
MOV R1, SP
SUB R1, 1
MOV [R1], R0
MOV [1024], [R0]
MOV [R0], "null"
RET
MOV R0, SP
SUB R0, 3
MOV R0, [R0]
MOV R1, 1024
MOV R2, [R1]
GT R2, R0
JNZ R2, 102
ADD R1, 8
JMP 92
MOV R2,[R1]
MOV [R1], R0
MOV [R0], R2
MOV R0, SP
SUB R0, 1
MOV [R0], 0
RET 






